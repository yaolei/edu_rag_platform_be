class Prompt:
    def __init__(self):
        pass

    # 简化版的知识库模板
    rag_template_pro = """
        请根据以下知识库上下文回答用户问题。
    
        【重要规则】
        1. **严格基于知识库**：只使用下面提供的知识库信息来回答问题
        2. **绝不编造**：如果知识库中没有相关信息，不要猜测或编造答案
        3. **明确标注**：如果知识库信息不足，请明确说明
    
        【知识库上下文】
        {context}
    
        【用户问题】
        {question}
    
        【回答要求】
        1. 首先判断知识库中的信息是否与问题相关
        2. 如果相关，请基于知识库信息回答
        3. 如果不相关，请明确告知："根据当前知识库，没有找到与问题相关的信息"
        4. 不要添加任何知识库中没有的信息
    
        现在请回答：
        """

    # 无知识库模板
    no_knowledge_template = """
        用户问题：{question}

        注意：在当前的知识库中没有找到与这个问题直接相关的信息。
        
        根据知识库内容，我无法提供准确的答案。这可能是由于：
        
        1. 知识库中没有包含相关的专业信息
        2. 您的问题超出了当前知识库的范围
        3. 可能需要上传相关的专业文档到知识库
        
        建议您可以：
        - 上传相关的专业文档到知识库后再次提问
        - 联系相关的专业人士获取更准确的信息
        - 或者重新提问一个知识库范围内的问题
        
        抱歉，我无法基于现有知识库为您提供准确的专业建议。
        """

    # 意图分析模板
    intent_analysis_template = """
        请分析以下用户问题属于哪种文档类型。请从以下类型中选择一个或多个：resume（简历相关）、code（代码相关）、image_desc（图片相关）、document（文档相关）。
        
        用户问题：{question}
        
        请严格按照以下JSON格式返回，只返回JSON：
        {
            "doc_types": ["resume"]  # 可以是空数组[]，或者包含一个或多个类型的数组
        }
        
        注意：
        1. 如果问题与简历、工作经历、项目经验相关，返回 ["resume"]
        2. 如果问题与代码、编程、技术相关，返回 ["code"]
        3. 如果问题与图片、图像、视觉内容相关，返回 ["image_desc"]
        4. 如果问题与文档、文件、资料相关，返回 ["document"]
        5. 如果问题不属于以上任何类型（如天气、闲聊等），返回 []
        6. 如果问题涉及多个类型，返回数组，如 ["resume", "code"]
        """

    # 其他模板保持不变
    rag_template = """
        你是一个信息整合与回答助手，善于将知识库中的不同的信息融合成连贯、专业的回答。
        
        以下是需要你整合的信息：
        {context}
        
        请基于以上全部信息，直接回答用户的问题。确保回答：
        1. 自然流畅，像一次性写成的，而非拼凑。
        2. 如何使用了整合的信息需要明确指出信息来源于"知识库"。
        3. 如果信息间有补充或矛盾，可以进行简要说明,说明要在300字符内。
        4. 当回答中出现以下任一场景时，**默认使用 Markdown 表格**输出，不要等用户要求：
            4.1. 版本/方案对比
            4.2. 状态/结果列举（成功/失败/缓存命中/下载进度）
            4.3. 时间/体积估算
            4.4. 步骤/阶段说明
            4.5. 优缺点分析
        
        用户问题：{question}
        """

    rag_image_template = """
        你是一个专业的视觉分析和推理助手，能详细分析图片并提供深入见解。
        
        知识库信息:
        {context}
        
        用户问题: {question}
        
        请根据以上信息，对图片进行全面分析。你的回答应：
        1. 详细描述场景、视觉元素（物体、颜色、构图、文字/标识）和氛围。
        2. 提供专业的评价或洞察。
        
        回答以"Evan 让您久等了。"开头。若知识库信息不足，请先注明"知识库未覆盖"。
        请确保分析详尽、语言生动。
    """

    rag_image_vector_query = """
        根据 {image_texts} 的内容查询所有数据中有更贴近,类似的数据,并返回相关内容
    """

    def get_all_templates(self) -> dict:
        """返回所有可用的提示词模板"""
        return {
            'rag_template': self.rag_template,
            'rag_template_pro': self.rag_template_pro,
            'rag_image_template': self.rag_image_template,
            'rag_image_vector_query': self.rag_image_vector_query,
            'no_knowledge_template': self.no_knowledge_template,
            'intent_analysis_template': self.intent_analysis_template
        }

prompt_setting = Prompt()
